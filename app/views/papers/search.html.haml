- provide :title, "Search results"

.container
  %h1 Search Scirate
  #advanced_search_form
    = form_tag(papers_search_path, method: :get) do |f|
      %table.table.table-striped
        %tr
          %td= label_tag :authors, "Author(s)"
          %td= text_field_tag :authors
          %td Comma-separated author names
        %tr
          %td= label_tag :title, "Title"
          %td= text_field_tag :title
          %td Contents of paper title
        %tr
          %td= label_tag :abstract, "Abstract"
          %td= text_field_tag :abstract
          %td Contents of paper abstract
        %tr
          %td= label_tag :feed, "Feed"
          %td= select_tag :feed, options_from_collection_for_select(Feed.all, :identifier, :fullname)
          %td Search a particular category feed
      .field
        = submit_tag "Search"

  %h2
    Results for "#{@query}"
  - unless @authors.nil? || @authors.empty?
    Matching authors:
    - @authors.each do |author|
      = link_to author.fullname, "/search?q=au:#{author.searchterm}"
      - unless author == @authors[-1]
        ,
  .paperlist
    %ul.papers
      - if @papers.empty?
        No papers found.
      - else
        = render @papers
  = will_paginate @papers
